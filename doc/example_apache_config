<VirtualHost _default_:443>
  # .... Servername and stuff ...

  # if a local staging is needed comment this
  # and add some hardcoded value in the front controller
  # The passed $_SERVER values are in the format
  # $_SERVER['shibb_pat_attribute_codicefiscale']
  <Location ~ "/(pratiche|user)">
     AuthType shibboleth
     ShibRequireSession On
     require valid-user
  </Location>
  
  # The ProxyPass directives. These are the actual core

  # The shibboleth one, needed only if mod_shib
  ProxyPass "/Shibboleth.sso/" !

  #Static stuff
  ProxyPassMatch ^/(.*\.(js|css|png|jpg|pdf))$ http://127.0.0.1:8080/$1 
  #Fallback to the FPM engine
  ProxyPassMatch ^(.*)$ fcgi://127.0.0.1:9000/actual/local/path/of/the/front/controller/app.php
  
  # ... SSL stuff if needed ...

</VirtualHost>                                  


