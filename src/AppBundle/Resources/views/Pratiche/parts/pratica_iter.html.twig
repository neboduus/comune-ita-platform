{% set duration = pratica|iter_duration(app.request.locale) %}
<h3>{{ 'pratica.iter'|trans }} {% if duration != '' %}<i class="fa fa-clock-o has_tooltip" data-toggle="tooltip" data-placement="top" title="{{ 'pratica.tooltip_durata_iter'|trans }} {{ pratica|iter_duration }}"></i>{% endif %}</h3>
<div class="panel no-border-radius">
    <div class="panel-body">
        <ul class="progress-indicator stepped stacked nocenter">
            {% for timestamp, changes in pratica.storicoStati %}
                <li class="completed info{% for change in changes[0] %}{% if change and (change == 10 or change == 100) %} last{% endif %}{% endfor %}">
                    <a href="#">
                        <span class="bubble"></span>
                        <span class="stacked-text">
                        <span class="fa fa-calendar"></span>
                        {{ timestamp|date(ocsdc_default_datetime_format) }}

                        {% for change in changes[0] %}
                            {% if change is not null and change is not iterable%}
                                <span class="subdued"><em> {{ ('pratica.dettaglio.stato_'~change)| trans }} </em></span>
                            {% endif %}

                        {% endfor %}
                        {% if changes[0][1] is defined and changes[0][1]['message'] is defined  and changes[0][1]['message'] is not null %}
                            <small class="clearfix subdued">Motivo: {{ changes[0][1]['message']}}</small>
                        {% endif %}
                        </span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
