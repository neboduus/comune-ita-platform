{% extends '@App/Default/index.html.twig' %}

{% block main_content %}
  <section class="container my-4">
    <div class="row">
      <div class="col-lg-12 px-lg-4 py-lg-2">
        <h1>{{ 'categories.title' | trans() }}</h1>
      </div>
    </div>
  </section>

  <section class="container-fluid py-5">
    <div class="container">
      <div class="col-12">
        <table class="table table-striped table-condensed table-sm">
          <thead>
          <tr>
            <th>{{ 'general.nome' | trans() }}</th>
            <th># Servizi collegati</th>
            <th># Grupppi di servizi collegati</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          {% for item in items %}
            <tr>
              <td data-title="Nome">
                <a href="{{ path('admin_category_edit', { 'id': item.id }) }}">{{ item.spaced_name }}</a>
              </td>
              <td>
                {{ item.related_services }}
              </td>
              <td>
                {{ item.related_services_group }}
              </td>
              <td class="text-right">
                <div class="dropdown dropdown-actions">
                  <button class="btn btn-link btn-dropdown dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <svg class="icon-expand icon align-middle icon-primary"><use xlink:href="/bootstrap-italia/dist/svg/sprite.svg#it-more-actions"></use></svg>
                  </button>
                  <div class="dropdown-menu dropdown-menu-right">
                    <div class="link-list-wrapper">
                      <ul class="link-list">
                        <li>
                          <a class="list-item left-icon" href="{{ path('admin_category_edit', { 'id': item.id }) }}">
                            <span class="text-primary"><i class="fa fa-pencil fa-lg"></i> {{ 'modifica'|trans }}</span>
                          </a>
                        </li>
                        {% if not item.object.hasRelations %}
                          <li>
                            <a class="list-item left-icon" onclick="return confirm('{{ 'general.alert_elimina'|trans }}');" href="{{ path('admin_category_delete', { 'id': item.id }) }}">
                              <span class="text-danger"><i class="fa fa-trash-o fa-lg"></i> {{ 'elimina'|trans }}</span>
                            </a>
                          </li>
                        {% endif %}
                      </ul>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
        <a class="btn btn-primary" href="{{ path('admin_category_new') }}">{{ 'aggiungi' | trans() }}</a>
      </div>
    </div>
  </section>
{% endblock %}
