{% extends '@App/Default/index.html.twig' %}

{% block stylesheets %}
  {{ parent() }}
  {{ encore_entry_script_tags('subscription-service-manager') }}
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  {{ encore_entry_link_tags('subscription-service-manager') }}
{% endblock %}

{% block main_content %}
  <section id="intro" class="container px-4 my-4">
    <div class="row">
      <div class="col-lg-12 px-lg-4 py-lg-2">
        <h1>Crea nuovo servizio a sottoscrizione</h1>
      </div>

      <div class="col-lg-12 px-lg-4 py-lg-2 mt-4">
        {{ form_start(form) }}
        {{ form_errors(form) }}

        {{ form_row(form.name) }}
        <div class="row">
          <div class="col-6">
            {{ form_row(form.code) }}
          </div>
          <div class="col-6">
            {{ form_row(form.tags) }}
          </div>
        </div>
        {{ form_row(form.description) }}
        <div class="row">
          <div class="col-6">
            {{ form_row(form.subscriptionBegin) }}
          </div>
          <div class="col-6">
            {{ form_row(form.subscriptionEnd) }}
          </div>
        </div>
        {{ form_row(form.subscriptionAmount) }}
        <div class="row">
          <div class="col-6">
            {{ form_row(form.beginDate) }}
          </div>
          <div class="col-6">
            {{ form_row(form.endDate) }}
          </div>
        </div>
        {{ form_row(form.subscribersLimit) }}
        {{ form_row(form.subscriptionMessage) }}
        {{ form_row(form.beginMessage) }}
        {{ form_row(form.endMessage) }}
        {{ form_row(form.status) }}

        <div id="payments"
             data-prototype="{{ form_widget(form.subscriptionPayments.vars.prototype)|e }}"
             data-widget-payment="{{ '<div></div>'|e }}"
             data-widget-counter="{{ form.subscriptionPayments|length }}">
          {% for payment in form.subscriptionPayments %}
            <div>
              {{ form_row(payment.date) }}
              {{ form_row(payment.amount) }}
            </div>
          {% endfor %}
        </div>

        <div class="row">
          <div class="col-6">
            <input class="btn btn-success" type="submit" value="Crea"/>
            <button type="button"
                    class="add-another-payment-widget btn btn-primary"
                    data-list-selector="#payments">Aggiungi pagamento</button>
          </div>
          <div class="col-6 text-right">
            <a class="btn btn-100" href="{{ path('operatori_subscription-service_index') }}">Torna alla lista</a>
          </div>
        </div>
        {{ form_end(form) }}

      </div>
    </div>
  </section>
{% endblock %}
